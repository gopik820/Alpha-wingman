<html>
  <head>
    <meta charset="utf-8" />
    <title>Result</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <center><h2>Image to Text</h2></center>
    <div class="container-fluid">
      <div class="row">
        <div class="col-xs-12">
          <textarea
            id="textValue"
            readonly
            name="result"
            rows="8"
            cols="250"
            value=""
          >
{{ text }}</textarea
          >
        </div>
        <div id="editor"></div>
      </div>
    </div>
    <form method="get" accept-charset="utf-8">
      <button type="button" class="btn btn-info" onclick="downloadText()">
        Download
      </button>
      <button type="button" class="btn btn-info" id="generatePDF">
        Generate PDF
      </button>
    </form>
  </body>
  <script
    src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
    integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"
  ></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>

  <script>
    var doc = new jsPDF();
    var specialElementHandlers = {
      "#editor": function (element, renderer) {
        return true;
      },
    };

    //margins.left, // x coord   margins.top, { // y coord
    $("#generatePDF").click(function () {
      doc.fromHTML($("#textValue").html(), 15, 15, {
        width: 700,
        elementHandlers: specialElementHandlers,
      });
      doc.save("sample_file.pdf");
    });
  </script>

  <script>
    function downloadText() {
      var text = document.getElementById("textValue").value;
      var val = "data:x-application/text," + escape(text);
      window.open(val);
    }
  </script>
</html>
